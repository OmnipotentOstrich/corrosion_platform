# 防腐保温智能数字平台开发文档

## 项目概述

防腐保温智能数字平台是一个面向防腐保温行业的综合性数字化平台，提供企业用户和个人用户的管理功能，包括信息发布、资源管理、项目管理等核心业务功能。

## 技术架构

### 后端技术栈
- **框架**: Django 4.2.7 + Django REST Framework
- **数据库**: MySQL 8.0
- **缓存**: Redis
- **认证**: JWT Token
- **API文档**: Swagger/OpenAPI
- **部署**: Docker + Gunicorn

### 前端技术栈
- **框架**: Vue 3 + Vite
- **UI库**: Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router
- **HTTP客户端**: Axios
- **图表**: ECharts
- **构建工具**: Vite

## 项目结构

```
防腐保温智能数字平台/
├── backend/                 # Django后端
│   ├── config/             # 项目配置
│   │   ├── settings.py     # 主配置文件
│   │   ├── urls.py         # URL路由配置
│   │   └── wsgi.py         # WSGI配置
│   ├── apps/               # 应用模块
│   │   ├── users/          # 用户管理
│   │   ├── enterprises/    # 企业用户
│   │   ├── persons/        # 个人用户
│   │   ├── info_plaza/     # 信息广场
│   │   ├── resources/      # 资源管理
│   │   └── system/         # 系统配置
│   ├── requirements.txt    # Python依赖
│   ├── Dockerfile         # Docker配置
│   └── manage.py          # Django管理脚本
├── frontend/               # Vue3前端
│   ├── src/
│   │   ├── components/     # 组件
│   │   ├── views/          # 页面
│   │   ├── api/            # API接口
│   │   ├── router/         # 路由
│   │   ├── stores/         # 状态管理
│   │   └── styles/         # 样式
│   ├── package.json        # 依赖配置
│   ├── vite.config.js      # Vite配置
│   └── Dockerfile         # Docker配置
├── nginx/                  # Nginx配置
├── docker-compose.yml      # Docker编排
├── start.sh               # 启动脚本
├── stop.sh                # 停止脚本
└── README.md              # 项目说明
```

## 功能模块

### 1. 用户管理模块
- 用户注册/登录/登出
- 用户信息管理
- 角色权限管理
- 菜单权限控制

### 2. 企业用户模块
- 企业信息管理
- 员工账户管理
- 项目管理
- 数据分析统计

### 3. 个人用户模块
- 个人信息管理
- 项目跟踪记录
- 任务管理
- 个人数据统计

### 4. 信息广场模块
- 信息发布系统
- 信息浏览检索
- 互动机制（点赞、收藏、评论）
- 推荐与热门展示

### 5. 资源管理模块
- 资源分类管理
- 资源信息录入
- 资源检索筛选
- 资源统计分析

### 6. 系统配置模块
- 系统参数配置
- 日志审计管理
- 可视化数据分析
- 系统监控

## 数据库设计

### 核心数据表
- `users` - 用户表
- `roles` - 角色表
- `permissions` - 权限表
- `menus` - 菜单表
- `enterprises` - 企业信息表
- `persons` - 个人用户信息表
- `info_posts` - 信息发布表
- `resources` - 资源信息表
- `system_configs` - 系统配置表

## API接口

### 认证接口
- `POST /api/v1/auth/login/` - 用户登录
- `POST /api/v1/auth/logout/` - 用户登出
- `POST /api/v1/auth/register/` - 用户注册
- `GET /api/v1/auth/profile/` - 获取用户信息

### 企业接口
- `GET /api/v1/enterprises/` - 企业列表
- `POST /api/v1/enterprises/` - 创建企业
- `GET /api/v1/enterprises/{id}/` - 企业详情
- `PUT /api/v1/enterprises/{id}/` - 更新企业

### 信息广场接口
- `GET /api/v1/info-plaza/posts/` - 信息列表
- `POST /api/v1/info-plaza/posts/` - 发布信息
- `GET /api/v1/info-plaza/posts/{id}/` - 信息详情
- `POST /api/v1/info-plaza/posts/{id}/like/` - 点赞信息

## 部署说明

### 环境要求
- Docker 20.10+
- Docker Compose 2.0+
- 至少4GB内存
- 至少20GB磁盘空间

### 快速启动
```bash
# 克隆项目
git clone <repository-url>
cd 防腐保温智能数字平台

# 启动服务
chmod +x start.sh
./start.sh
```

### 访问地址
- 前端: http://localhost:8080
- 后端API: http://localhost:8080/api/
- 管理后台: http://localhost:8080/admin/

### 默认账号
- 用户名: admin
- 密码: admin123456

## 开发指南

### 后端开发
```bash
# 进入后端目录
cd backend

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate     # Windows

# 安装依赖
pip install -r requirements.txt

# 数据库迁移
python manage.py migrate

# 创建超级用户
python manage.py createsuperuser

# 启动开发服务器
python manage.py runserver
```

### 前端开发
```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

## 配置说明

### 环境变量
```bash
# 数据库配置
DB_HOST=localhost
DB_NAME=corrosion_platform
DB_USER=root
DB_PASSWORD=password

# Redis配置
REDIS_URL=redis://localhost:6379/0

# JWT配置
SECRET_KEY=your-secret-key
```

### 系统配置
系统支持通过管理后台或API接口动态配置系统参数，包括：
- 网站基本信息
- 文件上传限制
- 邮件配置
- 安全设置

## 安全考虑

### 认证安全
- JWT Token认证
- 密码加密存储
- 登录失败限制
- 会话超时控制

### 数据安全
- SQL注入防护
- XSS攻击防护
- CSRF保护
- 文件上传安全

### 权限控制
- 基于角色的访问控制(RBAC)
- 接口权限验证
- 数据权限隔离
- 操作日志记录

## 性能优化

### 数据库优化
- 索引优化
- 查询优化
- 连接池配置
- 读写分离

### 缓存策略
- Redis缓存
- 页面缓存
- API响应缓存
- 静态资源缓存

### 前端优化
- 代码分割
- 懒加载
- 图片压缩
- CDN加速

## 监控与日志

### 系统监控
- 服务器资源监控
- 应用性能监控
- 数据库监控
- 错误率监控

### 日志管理
- 访问日志
- 错误日志
- 业务日志
- 安全日志

## 扩展功能

### 计划功能
- 移动端APP
- 微信小程序
- 第三方集成
- AI智能推荐
- 大数据分析

### 技术升级
- 微服务架构
- 容器化部署
- 云原生支持
- 自动化运维

## 常见问题

### Q: 如何重置管理员密码？
A: 可以通过Django shell重置：
```bash
docker-compose exec backend python manage.py shell
>>> from django.contrib.auth import get_user_model
>>> User = get_user_model()
>>> user = User.objects.get(username='admin')
>>> user.set_password('new_password')
>>> user.save()
```

### Q: 如何备份数据？
A: 使用Docker命令备份数据库：
```bash
docker-compose exec db mysqldump -u root -p corrosion_platform > backup.sql
```

### Q: 如何查看日志？
A: 查看容器日志：
```bash
docker-compose logs -f backend
docker-compose logs -f frontend
```

## 技术支持

如有技术问题，请联系开发团队或提交Issue。

## 许可证

本项目采用MIT许可证，详见LICENSE文件。
