/* empty css             *//* empty css                   */import{r as c,M,C as x,c as r,o as l,d as e,ak as v,aI as D,aJ as L,b as S,al as $,S as B,H as P,I as V,an as I,B as _,aj as N,k as T,L as n,aw as Y,a8 as E}from"./index-B_YfpHek.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"personal-projects"},H={class:"filters"},R={class:"projects-list"},q={key:0,class:"empty-state"},z={class:"project-header"},J={class:"role"},Q={class:"project-description"},A={class:"project-progress"},G={class:"progress-bar"},K={class:"progress-text"},O={class:"project-meta"},W={class:"project-actions"},X=["onClick"],Z=["onClick"],j={__name:"Projects",setup(ss){const h=T(),u=c(!1),i=c(""),d=c(""),p=c([]),f={manager:"项目经理",developer:"开发人员",designer:"设计师",tester:"测试人员",member:"团队成员"},m=M(()=>p.value.filter(s=>{const a=s.name?.toLowerCase().includes(i.value.toLowerCase())||s.description?.toLowerCase().includes(i.value.toLowerCase()),t=!d.value||s.role===d.value;return a&&t})),g=s=>s?N(s).format("YYYY-MM-DD"):"-",y=async()=>{try{u.value=!0;const s=await I.get("/persons/projects/"),a=s.data.results||s.data||[];p.value=a.map(t=>({id:t.id,name:t.name||t.title||"未命名项目",description:t.description||"暂无描述",role:f[t.role]||t.role||"团队成员",progress:t.progress||0,startDate:g(t.start_date||t.startDate),deadline:g(t.end_date||t.deadline),status:t.status||"in_progress"}))}catch(s){console.error("加载项目列表失败:",s),_.error("加载项目列表失败"),p.value=[]}finally{u.value=!1}},b=()=>{_.info("加入项目功能开发中")},k=s=>{E.alert(`
      <div style="text-align: left;">
        <p><strong>描述：</strong>${s.description}</p>
        <p><strong>角色：</strong>${s.role}</p>
        <p><strong>进度：</strong>${s.progress}%</p>
        <p><strong>开始时间：</strong>${s.startDate}</p>
        <p><strong>截止时间：</strong>${s.deadline}</p>
      </div>
    `,s.name,{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭"})},C=s=>{h.push({path:"/dashboard/personal/tasks",query:{projectId:s.id,projectName:s.name}})};return x(()=>{y()}),(s,a)=>{const t=$;return l(),r("div",F,[e("div",{class:"page-header"},[a[2]||(a[2]=e("h1",null,"我的项目",-1)),e("div",{class:"header-actions"},[e("button",{class:"btn btn-primary",onClick:b}," 加入项目 ")])]),e("div",H,[v(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>i.value=o),placeholder:"搜索项目...",class:"search-input"},null,512),[[D,i.value]]),v(e("select",{"onUpdate:modelValue":a[1]||(a[1]=o=>d.value=o),class:"filter-select"},[...a[3]||(a[3]=[S('<option value="" data-v-d1c83753>全部角色</option><option value="manager" data-v-d1c83753>项目经理</option><option value="developer" data-v-d1c83753>开发人员</option><option value="designer" data-v-d1c83753>设计师</option><option value="tester" data-v-d1c83753>测试人员</option>',5)])],512),[[L,d.value]])]),v((l(),r("div",R,[m.value.length===0?(l(),r("div",q,[...a[4]||(a[4]=[e("p",null,"暂无项目数据",-1)])])):B("",!0),(l(!0),r(P,null,V(m.value,o=>(l(),r("div",{key:o.id,class:"project-card"},[e("div",z,[e("h3",null,n(o.name),1),e("span",J,n(o.role),1)]),e("p",Q,n(o.description),1),e("div",A,[e("div",G,[e("div",{class:"progress-fill",style:Y({width:o.progress+"%"})},null,4)]),e("span",K,n(o.progress)+"%",1)]),e("div",O,[e("span",null,"开始时间: "+n(o.startDate),1),e("span",null,"截止时间: "+n(o.deadline),1)]),e("div",W,[e("button",{class:"btn btn-sm btn-outline",onClick:w=>k(o)}," 查看详情 ",8,X),e("button",{class:"btn btn-sm btn-primary",onClick:w=>C(o)}," 查看任务 ",8,Z)])]))),128))])),[[t,u.value]])])}}},ns=U(j,[["__scopeId","data-v-d1c83753"]]);export{ns as default};
