/* empty css             *//* empty css                *//* empty css                 *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        */import{u as I,r as p,a as L,C as S,c as x,o as v,b as M,d as o,e as s,w as t,E as N,f as D,g as P,j as T,B as $,k as G,l as m,t as j,m as A,n as H,p as J,q as K,D as O,F as Q,x as g,G as W,H as X,I as Y,J as Z,K as ee,L as E,s as se,i as re}from"./index-B_YfpHek.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"register-container"},te={class:"register-content"},ae={class:"register-info"},ie={class:"info-content"},ne={class:"logo-section"},de={class:"logo-icon"},ue={class:"features"},pe={class:"feature-item"},me={class:"feature-item"},ge={class:"feature-item"},_e={class:"register-box"},ce={class:"role-option"},fe={class:"role-name"},ve={class:"role-description"},be={class:"register-footer"},we={__name:"Register",setup(Ve){const k=G(),b=I(),_=p(),c=p(!1),f=p(!1),u=p([]),r=L({user_type:"personal",username:"",email:"",phone:"",password:"",password_confirm:"",first_name:"",role_id:null}),R={user_type:[{required:!0,message:"请选择用户类型",trigger:"change"}],role_id:[{required:!0,message:"请选择您的角色",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],first_name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"姓名长度在2到10个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],password_confirm:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(a,e,n)=>{e!==r.password?n(new Error("两次输入密码不一致")):n()},trigger:"blur"}]},w=async()=>{if(!(u.value.length>0))try{f.value=!0;const a=await b.getAvailableRoles(r.user_type);u.value=a}catch(a){console.error("加载角色列表失败:",a),$.error("加载角色列表失败")}finally{f.value=!1}},U=()=>{r.role_id=null,u.value=[]},V=async()=>{if(_.value)try{if(!await _.value.validate())return;c.value=!0,(await b.register(r)).success&&(r.username="",r.first_name="",r.email="",r.phone="",r.password="",r.password_confirm="",r.role_id=null,setTimeout(()=>{k.push("/login")},1e3))}catch(a){console.error("注册失败:",a)}finally{c.value=!1}};return S(()=>{w()}),(a,e)=>{const n=N,y=Q,h=O,i=K,z=ee,q=W,d=se,F=re,B=P,C=T;return v(),x("div",oe,[e[19]||(e[19]=M('<div class="bg-decoration" data-v-449cd185><div class="bg-circle circle-1" data-v-449cd185></div><div class="bg-circle circle-2" data-v-449cd185></div><div class="bg-circle circle-3" data-v-449cd185></div><div class="bg-wave" data-v-449cd185></div></div>',1)),o("div",te,[o("div",ae,[o("div",ie,[o("div",ne,[o("div",de,[s(n,{size:"48"},{default:t(()=>[s(m(j))]),_:1})]),e[9]||(e[9]=o("h1",null,"防腐保温智能数字平台",-1)),e[10]||(e[10]=o("p",{class:"subtitle"},"Corrosion Protection & Insulation Digital Platform",-1))]),o("div",ue,[o("div",pe,[s(n,null,{default:t(()=>[s(m(A))]),_:1}),e[11]||(e[11]=o("span",null,"安全可靠",-1))]),o("div",me,[s(n,null,{default:t(()=>[s(m(H))]),_:1}),e[12]||(e[12]=o("span",null,"智能分析",-1))]),o("div",ge,[s(n,null,{default:t(()=>[s(m(J))]),_:1}),e[13]||(e[13]=o("span",null,"协同管理",-1))])])])]),o("div",_e,[e[18]||(e[18]=o("div",{class:"register-header"},[o("h2",null,"用户注册"),o("p",null,"请填写您的注册信息")],-1)),s(B,{ref_key:"registerFormRef",ref:_,model:r,rules:R,class:"register-form",onSubmit:D(V,["prevent"])},{default:t(()=>[s(i,{prop:"user_type"},{default:t(()=>[s(h,{modelValue:r.user_type,"onUpdate:modelValue":e[0]||(e[0]=l=>r.user_type=l),size:"large",onChange:U},{default:t(()=>[s(y,{label:"personal"},{default:t(()=>[...e[14]||(e[14]=[g("个人用户",-1)])]),_:1}),s(y,{label:"enterprise"},{default:t(()=>[...e[15]||(e[15]=[g("企业用户",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(i,{prop:"role_id"},{default:t(()=>[s(q,{modelValue:r.role_id,"onUpdate:modelValue":e[1]||(e[1]=l=>r.role_id=l),placeholder:"请选择您的角色",size:"large",style:{width:"100%"},loading:f.value,onFocus:w},{default:t(()=>[(v(!0),x(X,null,Y(u.value,l=>(v(),Z(z,{key:l.id,label:l.name,value:l.id},{default:t(()=>[o("div",ce,[o("span",fe,E(l.name),1),o("span",ve,E(l.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),s(i,{prop:"username"},{default:t(()=>[s(d,{modelValue:r.username,"onUpdate:modelValue":e[2]||(e[2]=l=>r.username=l),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{prop:"first_name"},{default:t(()=>[s(d,{modelValue:r.first_name,"onUpdate:modelValue":e[3]||(e[3]=l=>r.first_name=l),placeholder:"请输入姓名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:t(()=>[s(d,{modelValue:r.email,"onUpdate:modelValue":e[4]||(e[4]=l=>r.email=l),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(i,{prop:"phone"},{default:t(()=>[s(d,{modelValue:r.phone,"onUpdate:modelValue":e[5]||(e[5]=l=>r.phone=l),placeholder:"请输入手机号",size:"large","prefix-icon":"Phone"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:t(()=>[s(d,{modelValue:r.password,"onUpdate:modelValue":e[6]||(e[6]=l=>r.password=l),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"password_confirm"},{default:t(()=>[s(d,{modelValue:r.password_confirm,"onUpdate:modelValue":e[7]||(e[7]=l=>r.password_confirm=l),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,null,{default:t(()=>[s(F,{type:"primary",size:"large",loading:c.value,onClick:V,class:"register-btn"},{default:t(()=>[...e[16]||(e[16]=[g(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",be,[s(C,{type:"primary",onClick:e[8]||(e[8]=l=>a.$router.push("/login"))},{default:t(()=>[...e[17]||(e[17]=[g(" 已有账号？立即登录 ",-1)])]),_:1})])])])])}}},Be=le(we,[["__scopeId","data-v-449cd185"]]);export{Be as default};
